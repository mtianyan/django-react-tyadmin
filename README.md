# TyAdmin: Django åŸºäºModels çš„ **No Code** é›¶ä»£ç é›¶å­¦ä¹ æˆæœ¬ç®¡ç†åå°å‰åç«¯ç”Ÿæˆå·¥å…·, ç”±Django Restful Framework å’Œ Ant Design Pro V4 é©±åŠ¨

![](https://img.shields.io/pypi/v/tyadmin-api-cli)
![](https://img.shields.io/pypi/wheel/tyadmin-api-cli)

æ”¯æŒPython3.9! ä¸é™Djangoç‰ˆæœ¬æ”¯æŒï¼Œæ”¯æŒæœ€æ–°Django4ï¼æ”¯æŒDjango3ï¼

# ğŸ¬ åœ¨çº¿ä½“éªŒDemo

>è´¦å·: tyadmin å¯†ç : tyadmin

~~æ¼”ç¤ºåœ°å€: https://tyadmin.funpython.cn/xadmin~~

**No Code!!! ä¸€è¡Œä»£ç éƒ½ä¸å†™ï¼Œå°±èƒ½æ‹¥æœ‰çš„ç°ä»£åŒ–åå°ç®¡ç†, åŠ¨åŠ¨å°æ‰‹ï¼Œ**star**ä¸€ä¸‹ï¼Œæ„Ÿè°¢ï¼ï¼**

TyAdmin: åªéœ€è¦èŠ±äº”åˆ†é’Ÿé˜…è¯»READMEå³å¯å¿«é€Ÿä¸Šæ‰‹ï¼Œæ— é¢å¤–æ–‡æ¡£ï¼Œæ— æ¡†æ¶å­¦ä¹ æˆæœ¬ï¼Œä¸ç”¨è‡ªå·±å†™ä¸€è¡Œä»£ç ï¼Œå…¨è‡ªåŠ¨çš„åå°ï¼Œä½ å€¼å¾—æ‹¥æœ‰ï¼

# âœ¨ ç‰¹æ€§

- è‡ªåŠ¨ç”Ÿæˆå‰åç«¯ç®¡ç†åå°ï¼Œé¡µé¢æ¥å£ç¥å¥‡å…¨è‡ªåŠ¨å¯¹æ¥ã€‚ç™»å½•éªŒè¯ï¼Œä¿®æ”¹å¯†ç ï¼ŒDashboardæ•°æ®ç»Ÿè®¡ã€‚
- ä¸€æ¬¡æ‹¥æœ‰ **å¢åˆ æ”¹æŸ¥ï¼Œç­›é€‰ï¼Œæœç´¢ï¼Œæ•°æ®å…¨é‡å¯¼å‡ºï¼Œé€‰æ‹©å¯¼å‡º** 
- **å¤–é”®å­—æ®µï¼Œå¤šå¯¹å¤šå­—æ®µï¼Œå¯Œæ–‡æœ¬ï¼Œæ–‡ä»¶ï¼Œå›¾ç‰‡ï¼Œdjangoè‡ªå¸¦æƒé™ç³»ç»Ÿ**

åªéœ€è¦è®¾è®¡å¥½Modelï¼Œåœ¨settingsä¸­é…ç½®éœ€è¦ç”Ÿæˆå“ªäº›modelï¼Œè¿è¡Œå‘½ä»¤: [å¿«é€Ÿä¸Šæ‰‹](#å¿«é€Ÿä¸Šæ‰‹) 

>åç«¯ç”Ÿæˆä¸€ä¸ªdjango appåˆ°é¡¹ç›®ç›®å½•, åªéœ€æ³¨å†Œä¸€ä¸‹ï¼Œ æ— éœ€å†å†™ä¸€è¡Œä»£ç ï¼ ä»£ç å½’ä½ æŒæ§ï¼Œæ— é˜»äºŒæ¬¡å¼€å‘ï¼
>å‰ç«¯ç”Ÿæˆä¸€ä¸ªAnt Design Pro V4é¡¹ç›®ï¼Œåªéœ€å¯åŠ¨ä¸€æ¬¡ï¼Œæ— éœ€å†å†™ä¸€è¡Œä»£ç ï¼ ä»£ç å½’ä½ æŒæ§ï¼Œæ— é˜»äºŒæ¬¡å¼€å‘ï¼

å‰ç«¯é¡µé¢ï¼Œåç«¯æ¥å£ï¼Œè·¯ç”±ï¼Œèœå•å…¨éƒ¨è‡ªåŠ¨å¯¹æ¥,ä½ åªéœ€è¦æ‹·è´æ–‡æ¡£ï¼Œä¿®æ”¹é…ç½®ï¼Œä¸éœ€è¦å†™ä¸€è¡Œä»£ç ï¼ï¼

# ğŸ å†…ç½®

## 1. å¤šç§ç™»å½•æ–¹å¼

![](http://cdn.pic.funpython.cn/blog_img/20201130234228.png)

## 2. å†…åµŒè‡ªåŠ¨dashboardï¼Œè‡ªåŠ¨æ³¨å†Œç°æœ‰model count æ•°æ®ã€‚

![](http://cdn.pic.funpython.cn/blog_img/20201130234054.png)

## 3. å…¨è‡ªåŠ¨çš„åˆ—è¡¨å±•ç¤ºï¼Œå¢åˆ æ”¹æŸ¥ï¼Œ ç­›é€‰ï¼Œæœç´¢ï¼Œå¯¼å‡ºExcel

![](http://cdn.pic.funpython.cn/blog_img/20201130234448.png)

![](http://cdn.pic.funpython.cn/blog_img/20201130234525.png)

## 4. djangoè‡ªå¸¦æƒé™ç»„æ”¯æŒï¼Œå¤–é”®è“ç‚¹å°æ ‡è®°popæ”¯æŒ

![](http://cdn.pic.funpython.cn/blog_img/20201130234705.png)

![](http://cdn.pic.funpython.cn/blog_img/20201130234753.png)

## 5. åŸºäºModelå®šä¹‰çš„è¡¨å•å­—æ®µçº§åˆ«è‡ªåŠ¨éªŒè¯

![](http://cdn.pic.funpython.cn/blog_img/20201010194705.png)

## 6. å†…åµŒå¯Œæ–‡æœ¬æ”¯æŒ,ä»…éœ€æŠŠå­—æ®µå®šä¹‰ä¸º`richTextField`,æ— éœ€ä»»ä½•é¢å¤–é›†æˆã€‚

![](http://cdn.pic.funpython.cn/blog_img/20201010192630.png)

# å¿«é€Ÿä¸Šæ‰‹ğŸ¤Ÿ 

ğŸ“¨ äº’åŠ¨äº¤æµåé¦ˆQQç¾¤: 304094780

>å·²æœ‰é¡¹ç›®å¯ä»ç¬¬äºŒæ­¥å¼€å§‹ï¼Œæ³¨æ„ä¿®æ”¹GEN_APPS å˜é‡ä¸ºè‡ªå·±éœ€è¦ç”Ÿæˆçš„appåˆ—è¡¨
>å¦‚æœ‰é—®é¢˜ï¼Œå¯å¯¹æ¯”demosä¸‹tyadmin_demo_finishé¡¹ç›®æ‰¾è‡ªå·±çš„ä¸åŒ,ä»¥åŠæŸ¥çœ‹[QAç¯èŠ‚](#QAç¯èŠ‚)

## 1. ä¸‹è½½demoé¡¹ç›®å®‰è£…ä¾èµ–(æ³¨æ„ï¼ï¼å·²æœ‰é¡¹ç›®ä¸éœ€è¦ä¸‹è½½demoé¡¹ç›®å¯ä»ç¬¬äºŒæ­¥å¼€å§‹ï¼Œæ³¨æ„ä¿®æ”¹GEN_APPS å˜é‡ä¸ºè‡ªå·±éœ€è¦ç”Ÿæˆçš„appåˆ—è¡¨)

```
git clone https://github.com/mtianyan/tyadmin_api_cli.git
cd tyadmin_api_cli/demos/tyadmin_demo_init
# å®‰è£…é¡¹ç›® åŸæœ¬å°±éœ€è¦çš„ä¾èµ–
pip install -r requirements.txt
```

## 2. å®‰è£…tyadmin-api-cliå¹¶æ³¨å†Œtyadmin-api-cli

```diff
pip install tyadmin-api-cli

INSTALLED_APPS = [
+    'captcha',
+    'tyadmin_api_cli',
]

+TY_ADMIN_CONFIG = {
+    'GEN_APPS': ['demo']
+}

# æ–¹ä¾¿æ‹·è´

    'captcha',
    'tyadmin_api_cli',

TY_ADMIN_CONFIG = {
    'GEN_APPS': ['demo']
}
```

GEN_APPS: å¡«å†™ä½ æƒ³è¦ç”Ÿæˆçš„appåˆ—è¡¨ã€‚ 

## 3. åˆå§‹åŒ– åç«¯app(tyadmin_api) + å‰ç«¯é¡¹ç›®(tyadmin)  && ç”Ÿæˆåç«¯è‡ªåŠ¨åŒ–çš„è§†å›¾ï¼Œè¿‡æ»¤å™¨ï¼Œè·¯ç”±ï¼Œåºåˆ—å™¨ + å‰ç«¯é¡µé¢åŠè·¯ç”±èœå•

ç”Ÿæˆåç«¯é¡µé¢ä¾èµ–ï¼Œéœ€å®‰è£…Node.js -> https://www.runoob.com/nodejs/nodejs-install-setup.html

>å®‰è£…Node.js 10ä»¥ä¸Šï¼Œæ¨èå®‰è£…ç‰ˆæœ¬Latest LTS Version: 12.19.0

```
python manage.py init_admin && python manage.py gen_all && cd tyadmin && npm install && npm run build
```

>è€å¿ƒç­‰å¾…ä¸€ä¼šï¼Œbuild ä¼šè¾“å‡º å‰ç«¯é¡µé¢åˆ°templatesæ–‡ä»¶å¤¹ï¼Œç”Ÿæˆå‰ç«¯js,css ç­‰åˆ°staticæ–‡ä»¶å¤¹

## 4. æ³¨å†Œç”Ÿæˆå‡ºçš„django app

```diff
INSTALLED_APPS = [
    'captcha',
    'tyadmin_api_cli',
+   'tyadmin_api'
]

# æ–¹ä¾¿æ‹·è´

'tyadmin_api'
```

## 5. æ³¨å†Œé¦–é¡µè·¯ç”±ï¼Œapiè·¯ç”±

./tyadmin_demo/urls.py

```diff
+ from tyadmin_api.views import AdminIndexView

urlpatterns = [
+    re_path('^xadmin/.*', AdminIndexView.as_view()),
+    path('api/xadmin/v1/', include('tyadmin_api.urls')),
]

# æ–¹ä¾¿æ‹·è´
from tyadmin_api.views import AdminIndexView

re_path('^xadmin/.*', AdminIndexView.as_view()),
path('api/xadmin/v1/', include('tyadmin_api.urls')),
```

## 6. è¿è¡Œé¡¹ç›®

```
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser # åˆ›å»ºä¸€ä¸ªå¯ä»¥ç™»å…¥åå°çš„ç”¨æˆ·
python manage.py runserver # é»˜è®¤è¿è¡Œåœ¨8000ç«¯å£
```

è®¿é—®http://127.0.0.1:8000/xadmin/ è¾“å…¥åˆšæ‰åˆ›å»ºçš„ç”¨æˆ·åå¯†ç ç™»å½•

è‡³æ­¤å¤§åŠŸå‘Šæˆï¼

>å¦‚æœæ²¡æœ‰æˆåŠŸçœ‹åˆ°é¡µé¢ï¼Œè¯·æŸ¥çœ‹QAéƒ¨åˆ†

# QAç¯èŠ‚

## 0. `TemplateDoesNotExist at /xadmin/ TyAdmin/index.html`

settings.py ä¸­é…ç½®templates è·¯å¾„

```diff
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
-        'DIRS': [],
+        'DIRS': [os.path.join(BASE_DIR, 'templates')],
```
## 1. å¡åœ¨loadingé¡µé¢ï¼Œä¸€ç›´æ— æ³•ç™»é™†

settings.py ä¸­é…ç½®static è·¯å¾„

```
if DEBUG:
    STATICFILES_DIRS = [
        os.path.join(BASE_DIR, "static"),
    ]
else:
    STATIC_ROOT = os.path.join(BASE_DIR, 'static')
```

## 2. å›¾ç‰‡æ²¡æœ‰æ­£å¸¸æ˜¾ç¤º

urls.py 

```
from django.views.static import serve

urlpatterns = [
re_path('media/(?P<path>.*)', serve, {"document_root": settings.MEDIA_ROOT}),
]
```

## 3. å½“é¡¹ç›®æ–°å¢äº†modelï¼Œæˆ‘è¯¥å¦‚ä½•ä¸ºæ–°modelç”Ÿæˆå‰ç«¯é¡µé¢+åç«¯æ¥å£

```diff
+TY_ADMIN_CONFIG = {
+    'GEN_APPS': ['demo','new_app']
+}
```
å¦‚ä¸ŠGEN_APPS ä¸­æ·»åŠ æ–°appçš„nameï¼Œç„¶åè¿è¡Œä¸‹é¢å‘½ä»¤

```
python manage.py gen_all && cd tyadmin && npm run build
```

## 4. é¡¹ç›®ä¿®æ”¹äº†modelï¼Œé‡æ–°ç”Ÿæˆé¡µé¢ä¸ºä½•ä¸ç”Ÿæ•ˆ

> ä¸ºé˜²æ­¢ä½ å¯¹å·²ç”Ÿæˆå‰ç«¯è¿›è¡Œçš„äºŒæ¬¡å¼€å‘è¢«è¦†ç›–ï¼Œé»˜è®¤æ˜¯ä¸å¼ºåˆ¶è¦†ç›–å·²ç”Ÿæˆçš„å‰ç«¯ã€‚å¦‚æœéœ€è¦é‡æ–°ç”Ÿæˆï¼Œè¯·æ·»åŠ å¦‚ä¸‹é…ç½® FORCED_COVER

```diff
TY_ADMIN_CONFIG = {
    'FORCED_COVER': True,
    'GEN_APPS': ['demo']
}
```

## 5. å¦‚ä½•è¿è¡Œç”Ÿæˆçš„å‰ç«¯ç‹¬ç«‹é¡¹ç›®

```
cd tyadmin
npm install
npm run start:dev # é»˜è®¤ä¼šè¿è¡Œåœ¨8001ç«¯å£
```

è¯·ç¡®è®¤djangoè¿è¡Œåœ¨8000ç«¯å£ï¼Œè®¿é—® http://127.0.0.1:8001/xadmin/

# ğŸ¤ è´¡çŒ®è€…åå•:

[longyn](https://github.com/longyn)

# ğŸ¤Ÿ æ‰“èµ

å¾ˆé«˜å…´æˆ‘çš„é¡¹ç›®ä»£ç æˆ–è®¸å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·æˆ‘åƒåŒ…è¾£æ¡æˆ–å–ç“¶å¯ä¹å§!

å¾®ä¿¡æ‰“èµ:

![mark](http://myphoto.funpython.cn/blog/180302/i52eHgilfD.png?imageslim)

# ğŸ”‘ License

[MIT](https://github.com/go-admin-team/go-admin/blob/master/LICENSE.md)

Copyright (c) 2020 mtianyan


# é™„å½•

## model->å‰ç«¯å¯¹åº”å…³ç³»

|  å­—æ®µç±»å‹   | å‰ç«¯å±•ç¤º  |
|  ----  | ----  |
| ForeignKey  | å•é€‰ |
| ManyToManyField  | å¤šé€‰ & å¤šå½©æ ‡ç­¾å±•ç¤º |
| richTextField  | å¯Œæ–‡æœ¬å±•ç¤º |
| CharField or IntegerField(with choices)  | å¤šé€‰ |
| CharField or IntegerField  | è¾“å…¥æ¡† |
| ImageField  | å¸¦é¢„è§ˆä¸Šä¼ ï¼Œå¯é€‰å¤´åƒï¼Œå›¾ç‰‡åˆ—è¡¨å±•ç¤º |
| FileField  | æ–‡ä»¶ä¸Šä¼  |
| TextField  | TextAreaæ¡† |
| BooleanField | Switché€‰æ‹©|
| IntegerField | æ•°å­—input|
| DateField| Dateé€‰æ‹©å™¨|
| DateTimeField| DateTimeé€‰æ‹©å™¨|

### ForeignKeyè‡ªåŠ¨ç”Ÿæˆä¸‹æ‹‰å•é€‰èœå•, ManyToManyFieldè‡ªåŠ¨ç”Ÿæˆä¸‹æ‹‰å¤šé€‰èœå•æˆ–ç©¿æ¢­æ¡†

![](http://cdn.pic.funpython.cn/blog_img/20201202214922.png)

![](http://cdn.pic.funpython.cn/blog_img/20201202214936.png)

![](http://cdn.pic.funpython.cn/blog_img/20201202214957.png)

### richTextField è‡ªåŠ¨ç”Ÿæˆå¯Œæ–‡æœ¬

```
detail = richTextField(verbose_name="è¯¾ç¨‹è¯¦æƒ…")
```

![](http://cdn.pic.funpython.cn/blog_img/20201010193352.png)

### CharFieldå’ŒIntegerField choices è‡ªåŠ¨ç”Ÿæˆè¡¨å•å‰ç«¯ä¸‹æ‹‰é€‰æ‹©æ¡†ã€‚

```python
GENDER_CHOICES = (
   ("male", "ç”·"),
   ("female", "å¥³")
)
gender = CharField(verbose_name="æ€§åˆ«",choices=GENDER_CHOICES)
```

![](http://cdn.pic.funpython.cn/blog_img/20201010190635.png)

### ImageField è‡ªåŠ¨ç”Ÿæˆå¸¦é¢„è§ˆçš„è¡¨å•ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ—è¡¨é¡µå¯é€‰ä¸¤ç§å±•ç¤ºæ–¹å¼ã€‚

```python
avatar = ImageField(verbose_name="å¤´åƒ") # å˜é‡åä¸ºavataræˆ–logoçš„ä¼šè‡ªåŠ¨ä¸ºå¤´åƒæ ·å¼
image = ImageField(verbose_name="å°é¢å›¾")    
```

![](http://cdn.pic.funpython.cn/blog_img/20201010191641.png)

![](http://cdn.pic.funpython.cn/blog_img/20201010191917.png)

![](http://cdn.pic.funpython.cn/blog_img/20201010191843.png)

### FileField å­—æ®µç”Ÿæˆæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€‚

```
download = FileField(verbose_name="èµ„æºæ–‡ä»¶")
```

![](http://cdn.pic.funpython.cn/blog_img/20201010193041.png)

### TextField è‡ªåŠ¨ç”Ÿæˆå‰ç«¯TextArea æ¡†

```python
desc = TextField(verbose_name="è¯¾ç¨‹æè¿°")
```

![](http://cdn.pic.funpython.cn/blog_img/20201010192813.png)

### BooleanField è‡ªåŠ¨å‰ç«¯ Boolean å•é€‰

```python
is_banner = BooleanField(verbose_name="æ˜¯å¦è½®æ’­")
```

![](http://cdn.pic.funpython.cn/blog_img/20201010193001.png)

### IntegerField è‡ªåŠ¨å‰ç«¯ Int è¾“å…¥æ¡†
```
learn_times = IntegerField(verbose_name="å­¦ä¹ æ—¶é•¿(åˆ†é’Ÿæ•°)")
```
![](http://cdn.pic.funpython.cn/blog_img/20201010193445.png)

### DateField è‡ªåŠ¨å‰ç«¯ Dateé€‰æ‹©æ¡†

```
birthday = DateField(verbose_name="ç”Ÿæ—¥")
```
![](http://cdn.pic.funpython.cn/blog_img/20201010193614.png)

### DateTimeField è‡ªåŠ¨è¡¨å• DateTime é€‰æ‹©æ¡†ï¼Œæ—¶é—´èŒƒå›´ç­›é€‰å™¨ã€‚

```
last_login = DateTimeField(verbose_name="ä¸Šæ¬¡ç™»å½•")
```

![](http://cdn.pic.funpython.cn/blog_img/20201010193852.png)

>æ³¨æ„è®¾ç½®äº†defaultï¼Œauto_nowçš„ä¸ä¼šå‡ºç°åœ¨è¡¨å•

![](http://cdn.pic.funpython.cn/blog_img/20201010195116.png)

